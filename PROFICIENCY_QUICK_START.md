# 🚀 熟練度系統快速開始

## 已完成的更新

✅ **間隔重複學習系統**已成功添加到自訂題庫！

## 🎯 核心功能

### 1. 智能選題（最多30題）
- 自訂題庫每次練習最多30題
- 根據熟練度智能選擇最需要練習的內容
- 新句子和不熟練的句子優先出現

### 2. 熟練度評估
答題後會看到：
```
📊 這句話你覺得：
[❌ 不熟練]  [✅ 熟練]
```
選擇後才能進入下一題。

### 3. 自動調整頻率
- 選「熟練」→ 等級+1 → 下次出現機會降低
- 選「不熟練」→ 等級-1 → 下次出現機會提高

## 📁 新增檔案

1. **PROFICIENCY_SYSTEM.md** - 完整使用說明
2. **test_proficiency.html** - 測試工具

## 🔧 技術實現

### 新增的類別
```javascript
class ProficiencyManager {
    // 管理熟練度資料
    // 智能選題演算法
    // 權重計算
}
```

### 修改的檔案
- ✅ `game.js` - 新增 ProficiencyManager 類別和相關方法
- ✅ `data.js` - 修改自訂題庫內容生成器
- ✅ `style.css` - 新增熟練度按鈕樣式

### 資料儲存
- **localStorage 鍵**: `frenchDiary_proficiency`
- **格式**: JSON 物件
- **內容**: 每個句子的熟練度、複習次數、時間

## 🧪 測試步驟

### 1. 基本測試
打開 `test_proficiency.html`：
```
1. 點擊「測試基本功能」
2. 點擊「測試權重計算」
3. 點擊「測試題目選擇」
4. 查看控制台輸出
```

### 2. 實際使用測試
1. 打開 `index.html`
2. 點擊「必學句型」
3. 開始答題
4. 答完後選擇熟練度
5. 完成30題後重新開始
6. 觀察題目是否根據熟練度調整

### 3. 查看資料
控制台執行：
```javascript
// 查看熟練度資料
JSON.parse(localStorage.getItem('frenchDiary_proficiency'))

// 查看統計
window.game.proficiencyManager.getProficiencyStats(window.customQuestions)
```

## 📊 權重計算公式

```
權重 = max(1, 10 - 熟練度等級 × 1.8)

等級 0: 權重 10.0 ⭐⭐⭐⭐⭐
等級 1: 權重 8.2  ⭐⭐⭐⭐
等級 2: 權重 6.4  ⭐⭐⭐
等級 3: 權重 4.6  ⭐⭐
等級 4: 權重 2.8  ⭐
等級 5: 權重 1.0  
```

## 🎮 使用流程圖

```
開始練習
    ↓
系統根據熟練度選出30題
    ↓
顯示題目 → 作答 → 查看反饋
    ↓
評估熟練度：[不熟練] 或 [熟練]
    ↓
    ├─ 熟練 → 等級+1 → 權重降低
    └─ 不熟練 → 等級-1 → 權重提高
    ↓
下一題（重複直到30題完成）
    ↓
查看成績
```

## 🎯 演算法說明

### 加權隨機選擇
```javascript
1. 計算每個題目的權重
2. 計算總權重
3. 生成隨機數 (0 ~ 總權重)
4. 遍歷題目，累減權重
5. 當隨機數 ≤ 0 時選中該題
6. 重複直到選出30題
```

這確保：
- 低熟練度題目有更高被選中機會
- 但不是完全固定（避免重複感）
- 高熟練度題目仍有機會出現（保持複習）

## 💡 使用建議

### 對學習者
1. **每天練習一次**（10-15分鐘）
2. **誠實評估**自己的熟練度
3. **不要急於標記為熟練**，多練幾次更好
4. **搭配語音**功能加強聽說能力

### 查看進度
```javascript
// 控制台查看所有句子的熟練度
const pm = window.game.proficiencyManager;
Object.entries(pm.proficiencyData).forEach(([text, data]) => {
    console.log(`${text}: Level ${data.level}, 複習 ${data.reviewCount} 次`);
});
```

## 🔄 更新說明

### v1.0 - 2025/12/11
- ✅ 新增熟練度管理系統
- ✅ 限制每次30題
- ✅ 智能選題演算法
- ✅ 熟練度評估界面
- ✅ 資料持久化儲存
- ✅ 測試工具

## ❓ 疑難排解

### 問題：按鈕沒有出現
**解決**：確認是在「必學句型」模式（currentDay === 'custom'）

### 問題：選擇後沒反應
**解決**：檢查控制台是否有錯誤訊息，確認 game.js 已正確載入

### 問題：想重置資料
**解決**：
```javascript
localStorage.removeItem('frenchDiary_proficiency');
location.reload();
```

### 問題：題目總是重複
**解決**：可能題庫太小，或熟練度都很低。繼續練習並標記熟練的句子。

## 📞 技術支援

如有問題，可以：
1. 查看 `PROFICIENCY_SYSTEM.md` 完整文檔
2. 使用 `test_proficiency.html` 測試工具
3. 檢查瀏覽器控制台（F12）的錯誤訊息
4. 查看 localStorage 中的資料

---

🎉 **開始使用吧！每天10分鐘，用智能方式學法文！**
